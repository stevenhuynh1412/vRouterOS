

# Hướng dẫn cấu hình hệ thống cơ bản trong vRouterOS

## Giới thiệu

Tài liệu này hướng dẫn các tác vụ cấu hình hệ thống cơ bản trong **vRouterOS**, bao gồm:
- Đặt tên máy chủ (hostname).
- Cấu hình múi giờ (timezone).
- Quản lý tài khoản người dùng (thêm, sửa, xóa tài khoản).

Các lệnh được thực thi trong **chế độ vận hành** (ký hiệu `$`) hoặc **chế độ cấu hình** (ký hiệu `#`). Các thay đổi trong chế độ cấu hình cần được **commit** để có hiệu lực và **lưu** để duy trì sau khi khởi động lại.

## Các tác vụ cấu hình cơ bản

### 1. Đặt tên máy chủ (Hostname)
- **Mô tả**: Tên máy chủ xác định danh tính của hệ thống trong mạng. Mặc định, tên máy chủ là `vyatta`.
- **Lệnh**:
  - Trong chế độ cấu hình:
    ```
    # set system host-name <hostname>
    # commit
    # save
    ```
- **Ví dụ**:
  ```
  $ configure
  # set system host-name vRouter1
  # commit
  # save
  Saving configuration to '/config/config.boot'...
  Done
  # exit
  ```
  - Sau khi commit, tên máy chủ thay đổi thành `vRouter1`, và dấu nhắc lệnh sẽ hiển thị tên mới (ví dụ: `vyatta@vRouter1:~$`).
- **Kiểm tra**:
  ```
  $ show system host-name
  vRouter1
  ```

### 2. Cấu hình múi giờ (Timezone)
- **Mô tả**: Múi giờ xác định thời gian hệ thống, quan trọng cho nhật ký và lịch trình. Mặc định là UTC.
- **Lệnh**:
  - Trong chế độ cấu hình:
    ```
    # set system time-zone <timezone>
    # commit
    # save
    ```
  - `<timezone>` là giá trị như `Asia/Ho_Chi_Minh`, `America/New_York`, v.v. (Xem danh sách múi giờ bằng `ls /usr/share/zoneinfo` trong chroot).
- **Ví dụ**:
  ```
  $ configure
  # set system time-zone Asia/Ho_Chi_Minh
  # commit
  # save
  Saving configuration to '/config/config.boot'...
  Done
  # exit
  ```
- **Kiểm tra**:
  ```
  $ show system time-zone
  Asia/Ho_Chi_Minh
  ```

### 3. Quản lý tài khoản người dùng
#### Thêm tài khoản người dùng
- **Mô tả**: Tạo tài khoản mới với tên, mật khẩu, và quyền (mặc định là `admin`).
- **Lệnh**:
  ```
  # set system login user <username> authentication plaintext-password <password>
  # commit
  # save
  ```
- **Ví dụ**:
  ```
  $ configure
  # set system login user newuser authentication plaintext-password MySecurePass123
  # commit
  # save
  Saving configuration to '/config/config.boot'...
  Done
  # exit
  ```
- **Kiểm tra**:
  ```
  $ show system login
  user newuser {
      authentication {
          plaintext-password MySecurePass123
      }
  }
  ```

#### Sửa đổi tài khoản người dùng
- **Mô tả**: Thay đổi mật khẩu hoặc thông tin tài khoản.
- **Lệnh**:
  - Đổi mật khẩu:
    ```
    # set system login user <username> authentication plaintext-password <new-password>
    # commit
    # save
    ```
- **Ví dụ**:
  ```
  $ configure
  # set system login user newuser authentication plaintext-password NewPass456
  # commit
  # save
  Saving configuration to '/config/config.boot'...
  Done
  # exit
  ```

#### Xóa tài khoản người dùng
- **Mô tả**: Xóa tài khoản người dùng khỏi hệ thống.
- **Lệnh**:
  ```
  # delete system login user <username>
  # commit
  # save
  ```
- **Ví dụ**:
  ```
  $ configure
  # delete system login user newuser
  # commit
  # save
  Saving configuration to '/config/config.boot'...
  Done
  # exit
  ```
- **Lưu ý**: Không xóa tài khoản đang đăng nhập để tránh mất quyền truy cập.

### 4. Kiểm tra cấu hình
- **Mô tả**: Xem cấu hình hiện tại để xác minh các thay đổi.
- **Lệnh**:
  - Trong chế độ vận hành:
    ```
    $ show configuration
    ```
  - Trong chế độ cấu hình:
    ```
    # show system
    ```
- **Ví dụ**:
  ```
  $ show configuration
  system {
      host-name vRouter1
      time-zone Asia/Ho_Chi_Minh
      login {
          user newuser {
              authentication {
                  plaintext-password MySecurePass123
              }
          }
      }
  }
  ```

### 5. So sánh và hủy bỏ thay đổi
- **So sánh cấu hình**:
  ```
  # compare
  ```
  - Hiển thị sự khác biệt giữa cấu hình làm việc và cấu hình đang chạy.
  - Ví dụ:
    ```
    # compare
    + system host-name vRouter1
    ```
- **Hủy bỏ thay đổi**:
  ```
  # discard
  ```
  - Hủy các thay đổi chưa commit, đưa cấu hình làm việc về trạng thái của cấu hình đang chạy.

## Ví dụ thực tế: Cấu hình đầy đủ
1. Vào chế độ cấu hình:
   ```
   $ configure
   ```
2. Đặt tên máy chủ:
   ```
   # set system host-name vRouter1
   ```
3. Đặt múi giờ:
   ```
   # set system time-zone Asia/Ho_Chi_Minh
   ```
4. Thêm người dùng:
   ```
   # set system login user admin2 authentication plaintext-password SecurePass789
   ```
5. Kiểm tra cấu hình:
   ```
   # show system
   host-name vRouter1
   time-zone Asia/Ho_Chi_Minh
   login {
       user admin2 {
           authentication {
               plaintext-password SecurePass789
           }
       }
   }
   ```
6. Áp dụng và lưu:
   ```
   # commit
   # save
   Saving configuration to '/config/config.boot'...
   Done
   # exit
   ```
7. Kiểm tra trong chế độ vận hành:
   ```
   $ show system host-name
   vRouter1
   $ show system time-zone
   Asia/Ho_Chi_Minh
   $ show system login
   user admin2 {
       authentication {
           plaintext-password SecurePass789
       }
   }
   ```

## Lưu ý quan trọng
- **Sao lưu cấu hình**: Luôn sao lưu trước khi thay đổi lớn:
  ```
  $ save /config/backup-YYYYMMDD.conf
  ```
- **Commit cẩn thận**: Các thay đổi được commit sẽ có hiệu lực ngay lập tức. Cấu hình sai có thể gây lỗi hệ thống hoặc mất kết nối.
- **Mật khẩu an toàn**: Sử dụng mật khẩu mạnh cho tài khoản người dùng để đảm bảo bảo mật.
- **Kiểm tra múi giờ**: Đảm bảo múi giờ đúng (ví dụ: `Asia/Ho_Chi_Minh` cho Việt Nam) để nhật ký và lịch trình chính xác.
- **Tài liệu tham khảo**: Xem thêm chi tiết trên trang tài liệu vRouterOS hoặc các tài liệu liên quan tại https://docs.fwcloud.co

## Kết luận
Cấu hình hệ thống cơ bản trong vRouterOS bao gồm đặt tên máy chủ, múi giờ, và quản lý tài khoản người dùng. Sử dụng các lệnh `set`, `delete`, `commit`, `save`, và `show` để thực hiện các tác vụ này một cách hiệu quả. Thực hành các ví dụ trên để làm quen với quy trình quản lý hệ thống.

